<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layout/layout}">

<div layout:fragment="content">
  <style>
    .loader-spinner {
      border-top-color: #3498db;
      animation: spinner 1s linear infinite;
    }
    @keyframes spinner {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }
  </style>

  <div class="resume-detail-container" id="main-content">
    <div id="upload-section">
      <div class="detail-header">
        <h2>ğŸš€ AI ì´ë ¥ì„œ ë¶„ì„ ì‹œì‘</h2>
        <p class="text-muted">íŒŒì¼ì„ ì—…ë¡œë“œí•˜ë©´ AIê°€ ê³µê³ ì™€ì˜ ì í•©ì„±ì„ ë¶„ì„í•©ë‹ˆë‹¤.</p>
      </div>

      <form th:action="@{/resume/analyze}" method="post" enctype="multipart/form-data" class="mt-4" onsubmit="return showLoading()">
        <div class="mb-4">
          <label class="form-label fw-bold">ì§€ì›í•˜ë ¤ëŠ” ê³µê³  ì œëª©</label>
          <input type="text" name="jobTitle" class="form-control" placeholder="ì˜ˆ: êµ¬ê¸€ ìë°” ë°±ì—”ë“œ ê°œë°œì ì‹ ì…" required>
        </div>

        <div class="upload-box mb-4">
          <label class="form-label fw-bold">ì´ë ¥ì„œ íŒŒì¼ (PDF / TXT)</label>
          <input type="file" name="file" class="form-control" accept=".pdf,.txt" required>
          <div class="form-text mt-2">ì´ë ¥ì„œ ì›ë¬¸ì„ ë¶„ì„í•˜ì—¬ ë§¤ì¹­ ì ìˆ˜ì™€ ì¡°ì–¸ì„ ë“œë¦½ë‹ˆë‹¤.</div>
        </div>

        <div class="action-buttons">
          <button type="submit" class="btn btn-primary w-100 py-3 fw-bold">
            âœ¨ AI ë¶„ì„ ë¦¬í¬íŠ¸ ìƒì„±í•˜ê¸°
          </button>
        </div>
      </form>
    </div>

    <div id="loading-section" style="display: none;" class="text-center py-5">
      <div class="d-flex justify-content-center mb-4">
        <div class="loader-spinner border-4 border-gray-200 h-16 w-16 rounded-full border-t-blue-500"></div>
      </div>
      <h3 class="fw-bold text-dark">AI ë©´ì ‘ê´€ì´ ì„œë¥˜ë¥¼ ê²€í†  ì¤‘ì…ë‹ˆë‹¤...</h3>
      <p class="text-muted">ì ì‹œë§Œ ê¸°ë‹¤ë ¤ì£¼ì„¸ìš”. ë³´í†µ 10ì´ˆ ì´ë‚´ì— ì™„ë£Œë©ë‹ˆë‹¤.</p>
      <div class="progress mt-4 mx-auto" style="max-width: 400px; height: 10px;">
        <div class="progress-bar progress-bar-striped progress-bar-animated" style="width: 100%"></div>
      </div>
    </div>
  </div>

  <script>
    function showLoading() {
      // 1. í¼ ìˆ¨ê¸°ê¸°
      document.getElementById('upload-section').style.display = 'none';
      // 2. ë¡œë”©ë°” ë³´ì´ê¸°
      document.getElementById('loading-section').style.display = 'block';
      return true; // í¼ ì œì¶œ ì§„í–‰
    }
  </script>
</div>
</html>